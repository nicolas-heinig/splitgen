<!doctype html>
<html>
<head>
	<title>Gen</title>
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"
  			integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
  			crossorigin="anonymous"></script>
	<script type="text/javascript">
	function val_from_array(arg){
		return randomInt(arg[0], arg[1]);
	}
	function randomInt(min, max) {
	    return Math.floor(Math.random() * (max - min + 1)) + min;
	}

		Gen = new Object();

		Gen.presets = {}
		// gsw lp fo vtd sr kw gw 

		Gen.presets.warrior = {
			gsw: {
				base: [5,6],
				level: function(level){
					return 0
				},
				difficulty: function(difficulty){
					return Math.floor((difficulty-1)/2);
				}
			},
			fo: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			vtd: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			sr: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			kw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			gw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			lp: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			}
		}

		Gen.presets.archer = {
			gsw: {
				base: [5,6],
				level: function(level){
					return 0
				},
				difficulty: function(difficulty){
					return Math.floor((difficulty-1)/2);
				}
			},
			fo: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			vtd: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			sr: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			kw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			gw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			lp: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			}
		}

		Gen.presets.mage = {
			gsw: {
				base: [5,6],
				level: function(level){
					return 0
				},
				difficulty: function(difficulty){
					return Math.floor((difficulty-1)/2);
				}
			},
			fo: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			vtd: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			sr: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			kw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			gw: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			},
			lp: {
				base: [5,6],
				level: function(level){
					return 0;
				},
				difficulty: function(difficulty){
					return 0;
				}
			}
		}

		Gen.params = {};
		Gen.params.level = 1; // Heldengrad
		Gen.params.stereotype = "warrior"; // Stereotype: "warrior", "mage", "archer"
		Gen.params.difficulty = 1; // 1 -> Weak, 2 -> Average, 3 -> Strong, 4 -> Boss
		Gen.model = {}; // Empty character data
		Gen.model.attr = {
			aus: 0,
			bew: 0,
			int: 0,
			kon: 0,
			mys: 0,
			sta: 0,
			ver: 0,
			wil: 0
		}
		Gen.generate = function(stereo){
			Gen.params.stereotype = stereo;
			Gen.set_params();
			Gen.race();
			$("#race").text(Gen.model.race.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();}))
			$("#aw_gk").text(Gen.aw_gk());

			["gsw", "lp", "fo", "vtd", "sr", "kw", "gw"].forEach(function(aw_name){
				$("#aw_" + aw_name).text(Gen.aw_for(aw_name));
			});
			$("#aw_gsw").text(Gen.aw_for("gsw"));
			$("#aw_lp").text(Gen.aw_for("lp"));
			$("#aw_fo").text(Gen.aw_for("fo"));
			$("#aw_vtd").text(Gen.aw_for("vtd"));
			$("#aw_sr").text(Gen.aw_for("sr"));
			$("#aw_kw").text(Gen.aw_for("kw"));
			$("#aw_gw").text(Gen.aw_for("gw"));
		}

		Gen.set_params = function(){
			// Read from user input later on
			Gen.params.level = 1; // Heldengrad (1 to 4)
			Gen.params.stereotype = "warrior"; // Stereotype: "warrior", "mage" etc.
			Gen.params.difficulty = 1; // 1 -> Weak, 2 -> Average, 3 -> Strong, 4 -> Boss
		}

		Gen.race = function(){
			Gen.model.race = "mensch" // "mensch", "gnom", "alb", "varg", "zwerg"
		}

		Gen.aw_gk = function(){
			return {mensch: 5, alb: 5, zwerg: 4, gnom: 3, varg: 6}[Gen.model.race]
		}

		Gen.aw_for = function(aw_name){
			aw = Gen.presets[Gen.params.stereotype][aw_name];
			val1 = val_from_array(aw.base);
			val_diff = 0;
			val_level = 0;
			extras = 0;
			if(aw_name == "gsw"){
				extras = Gen.aw_gk() - 4
			}
			return Math.floor(val1 + val_diff + val_level + extras + 0.5);

		}
	</script>
</head>
<body>
	<table>
		<tr><td>Rasse</td><td><span id="race"></span></td></tr>
		<tr><td>Größenkategorie (GK)</td><td><span id="aw_gk"></span></td></tr>
		<tr><td>Geschwindigkeit (GSW)</td><td><span id="aw_gsw"></span></td></tr>
		<tr><td>Lebenspunkte (LP)</td><td><span id="aw_lp"></span></td></tr>
		<tr><td>Fokus (FO)</td><td><span id="aw_fo"></span></td></tr>
		<tr><td>Verteidigung (VTD)</td><td><span id="aw_vtd"></span></td></tr>
		<tr><td>Schadensreduktion (SR)</td><td><span id="aw_sr"></span></td></tr>
		<tr><td>Körp. Widerstand (KW)</td><td><span id="aw_kw"></span></td></tr>
		<tr><td>Geist. Widerstand (GW)</td><td><span id="aw_gw"></span></td></tr>
	</table>
	<button onclick="Gen.generate('warrior')">Krieger</button>
	<button onclick="Gen.generate('archer')">Späher</button>
	<button onclick="Gen.generate('mage')">Magier</button>
</body>
<script type="text/javascript">$(document).ready(Gen.generate);</script>
</html>